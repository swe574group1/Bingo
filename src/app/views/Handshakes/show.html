#{extends 'logged_user.html' /}
#{set title:'Handshake Details' /}

<div id="main" style="padding-top:0px">
  <div class="post" style="padding:top:0px">
    <div class="right">
      <div class="restrictions">
	<h4>Details for Handshake</h4>
	<ul>
	  <li>
	    <label>Title</label>
	    ${handshake.offer.title}
	  </li>
	  <li>
	    <label>Description</label>
	    ${handshake.offer.description}
	  </li>
          <li>
            <label>Honey Combs Made</label>
	    ${handshake.offer.credit}
          </li>
          <li>
            <label>Status</label>
	    ${handshake.status}
          </li>
        </ul>
      </div>
    </div>
    
    <div class="left">
      <div class="post-meta">
        <ul>
          <li><h4>Offerer</h4>${handshake.offer.user.fullname}</li> 
          <li><h4>Requester</h4>${handshake.request.user.fullname}</li>
        </ul>
      </div>
    </div>
    
    <div class="post-meta">
      <h4>tags</h4>
      <p>
	#{if handshake.offer.tags}
	${handshake.offer.tags.join(', ')}
	#{/if}
	#{else}
	${handshake.request.tags.join(', ')}
	#{/else}
      </p>
    </div>

  </div>

#{if handshake.status == models.Handshake.Status.WAITING_APPROVAL}
<button onclick="window.location='@{Handshakes.accept(handshake.id)}'">Accept</button>
#{/if}
#{if handshake.status == models.Handshake.Status.ACCEPTED}
<button onclick="window.location='@{Handshakes.start(handshake.id)}'">Start</button>
<button onclick="window.location='@{Handshakes.cancel(handshake.id)}'">Cancel</button>
#{/if}
#{if handshake.status == models.Handshake.Status.STARTED}
<button onclick="window.location='@{Handshakes.end(handshake.id)}'">End</button>
#{/if}
</div>
