#{extends 'logged_user.html' /}
#{set title:'Create Offer' /}

#{set 'moreStyles'}
<link rel="stylesheet" type="text/css" media="screen" href="@{'/public/stylesheets/datepicker.css'}">
<link rel="stylesheet" type="text/css" media="screen" href="@{'/public/stylesheets/ui-lightness/jquery-ui-1.8.6.custom.css'}">
<link rel="stylesheet" type="text/css" media="screen" href="@{'/public/stylesheets/jquery.tagedit.css'}">
#{/set}

#{set 'moreScripts'}
<script src="@{'/public/javascripts/datepicker.js'}" type="text/javascript" charset="${_response_encoding}"></script>
<script src="@{'/public/javascripts/jquery-ui-1.8.6.custom.min.js'}" type="text/javascript" charset="${_response_encoding}"></script>
<script src="@{'/public/javascripts/jquery.autoGrowInput.js'}" type="text/javascript" charset="${_response_encoding}"></script>
<script src="@{'/public/javascripts/jquery.tagedit.js'}" type="text/javascript" charset="${_response_encoding}"></script>
<script src="@{'/public/javascripts/create-offer.js'}" type="text/javascript" charset="${_response_encoding}"></script>
<script src="@{'/public/javascripts/gmaps.js'}" type="text/javascript" charset="${_response_encoding}"></script>
<script src="http://www.google.com/jsapi" type="text/javascript" charset="${_response_encoding}" ></script>
<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCG9Kc_QV1stkM1sPMZqdkPmXfb47u_HFc&sensor=false" type="text/javascript" charset="${_response_encoding}"  ></script>
#{/set}

#{if offerItem.id}
<h3 style="padding-top:0px;">Edit Offer</h3>
<p>Use the form below to edit your offer.</p>
#{/if}
#{else}
<h3 style="padding-top:0px;">Create New Offer</h3>
<p>Use the form below to create a new offer.</p>
#{/else}

<script>

function addElement(text,value,ddl)
{ 
	var elOptNew = document.createElement('option');
	elOptNew.text = text;
	elOptNew.value = value;
	
  	try 
	{
		ddl.add(elOptNew, null); // standards compliant; doesn't work in IE
	}
  	catch(ex) {
	    ddl.add(elOptNew); // IE only
	}
}
</script>


<form action="@{Offers.doCreate()}" method="POST" class="utility_form taggable">
	<input type="hidden" name="offerItem.id" value="${offerItem.id}" />

  <fieldset>
    <legend>Descriptions</legend>
    
    <ul>
      <li>
        <label style="padding-top:7px">Title</label>
        <input type="text" style="width:200px;"name="offerItem.title" value="${offerItem.title}" />
	<span class="error">#{error 'offerItem.title' /}</span>
      </li>
      <li>
        <label style="padding-top:7px">Tags</label>
        <input id="tags" type="text" style="width:200px;" name="tags[]" value="${offerItem.tags.join(' ')}" /> Separate tags with spaces
	<span class="error">#{error 'offerItem.tags' /}</span>
      </li>
     <li>
        <label style="padding-top:7px">Description</label>
        <textarea rows="5" style="width:330px" name="offerItem.description">${offerItem.description}</textarea>
        <span style="position: absolute; padding-top:40px" class="error">&nbsp;#{error 'offerItem.description' /}</span>
      </li>

      	<li id="liDuration">
        <label style="padding-top:7px">Duration</label>
        <input type="text" style="width:100px;"name="offerItem.duration" value="${offerItem.duration}" />
	<span class="error">#{error 'offerItem.duration' /}</span>  
	 in hours        
    </li>   
      <li>
      <label style="padding-top:7px">Is Virtual?</label>  
     		<select id="ddlVirtualization" onchange="enableVirtualization(this);">
  			<option value="0" selected="selected">No</option>
  			<option value="1">Yes</option>	  			
		</select>
      		Via online interaction, chat, webcam etc.
      		<input id="chkVirtualization" style="visibility: hidden; display: none" type="checkbox" name="offerItem.is_virtual" ${offerItem.isVirtual ? 'checked':''}  />	
    	</li>
    </ul>
  </fieldset>
  
  <fieldset>
    <legend>Limitations</legend>
    <ul>
      <li>
        <label style="padding-top:7px">Valid Until</label>
        <input id="txt_val_until" readonly="readonly" type="text" name="offerItem.endDate" class="date_pick" value="${offerItem.endsAt}"/>
	<span class="error">#{error 'offerItem.endsAt' /}</span>
      </li>
    </ul>
   
  </fieldset>
   
   <fieldset><legend>Location</legend>
   <ul>
   <li>
   <label style="padding-top:7px">Range</label> 
   <input id="txt_range"  type="text" name="offerItem.rangeFromLocation" value="${offerItem.rangeFromLocation}" />  KM
   </li>
   <li>
   <input id="txt_location"  type="hidden" name="offerItem.location" value="${offerItem.location}" />
   </li>
   </ul>
   <div id="map_canvas" style="width:600px; height:280px"></div>
   </fieldset>
       
   
  <input type="submit" value="Submit" />

</form>

<script>
initialize();
</script>
