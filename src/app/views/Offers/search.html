#{extends 'logged_user.html' /}
#{set title:'Search Offers' /}
<h3>Offers</h3>
#{if allOffers}
<form action="@{Offers.search()}" style="width:655px; padding:15px 5px 15px 20px;">
  <label for="phrase" style="float:left; width:70px; margin-top:10px">Search</label>
  <input type="text" name="phrase" id="phrase" value="${phrase}" style="width:300px" />
  &nbsp;Leave empty to search all items
</form>
#{/if}

#{if phrase}
#{if foundOffers}
<table style="width:92%">
  <tr>
    <th>Title</th>
    <th>Offerer</th>
    <th>Valid Until</th>
    <th>Honey Combs</th>
    <th>Details</th>
  </tr>
  #{list items:foundOffers, as:'offer'}
  <tr>
    <td>${offer.title}</td>
    <td>${offer.user.fullname}</td>
    <td>${offer.endDate.format('dd MMMM yyyy')}</td>
    <td>${offer.credit}</td>
    <td><a href="@{Offers.showDetails(offer.id)}">Details</a></td>
  </tr>
  #{/list}
</table>
#{/if}
#{else}
<br/>
 <label style="padding-left:45px;">No offers are able to match the criteria.</label>
#{/else}
#{/if}
#{else}
#{if allOffers}
<table style="width:92%">
  <tr>
    <th>Title</th>
    <th>Offerer</th>
    <th>Valid Until</th>
    <th>Honey Combs</th>
    <th>Details</th>
  </tr>
  #{list items:allOffers, as:'offer'}
  <tr>
    <td>${offer.title}</td>
    <td>${offer.user.fullname}</td>
    <td>${offer.endDate.format('dd MMMM yyyy')}</td>
    <td>${offer.credit}</td>
    <td><a href="@{Offers.showDetails(offer.id)}">Details</a></td>
  </tr>
  #{/list}
</table>
#{/if}
#{else}
 <label style="padding-left:45px;">There are no available offers.</label>
#{/else}
#{/else}
